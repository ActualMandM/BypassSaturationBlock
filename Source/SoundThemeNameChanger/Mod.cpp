char* acString;
char* vbString;
char* ftString;

char* acUIString;
char* vbUIString;
char* ftUIString;

// v1.0.0: 0x1406C9800
SIG_SCAN
(
	sigSoundTheme,
	"\x48\x8B\xC4\x48\x89\x58\x10\x48\x89\x70\x18\x55\x57\x41\x54\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\xC8\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x48\x8B\xD9\x48\x81\xC1\x00\x00\x00\x00\xE8\x00\x00\x00\x00\xBA\x00\x00\x00\x00\x48\x63\x83\x00\x00\x00\x00\x83\xF8\x05\x0F\x87\x00\x00\x00\x00\x4C\x8D\x05\x00\x00\x00\x00\x41\x8B\x8C\x80\x00\x00\x00\x00\x49\x03\xC8\xFF\xE1\x80\xBB\x00\x00\x00\x00\x00\x0F\x85\x00\x00\x00\x00\x0F\xBE\x8B\x00\x00\x00\x00\x85\xC9\x74\x40\x83\xE9\x01\x74\x31\x83\xE9\x01\x74\x22\x83\xE9\x01\x74\x13\x83\xF9\x01\x0F\x85\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\x80\xBB\x00\x00\x00\x00\x00\x75\x4C\x0F\xBE\x8B\x00\x00\x00\x00\x85\xC9\x74\x3A\x83\xE9\x01\x74\x2E\x83\xE9\x01\x74\x22\x83\xE9\x01\x74\x13\x83\xF9\x01\x0F\x85\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xE9\x00\x00\x00\x00\xBA\x00\x00\x00\x00\xEB\x7A\xBA\x00\x00\x00\x00\xEB\x73\xBA\x00\x00\x00\x00\xEB\x6C\xBA\x00\x00\x00\x00\xEB\x65\x80\xBB\x00\x00\x00\x00\x00\x75\x42\x0F\xBE\x8B\x00\x00\x00\x00\x85\xC9\x74\x30\x83\xE9\x01\x74\x24\x83\xE9\x01\x74\x18\x83\xE9\x01\x74\x0C\x83\xF9\x01\x75\x3D\xBA\x00\x00\x00\x00\xEB\x36",
	"xxxxxxxxxxxxxxxxxxxxxx????xxx????xxxxxxx????xxxxxx????xxxxxx????x????x????xxx????xxxxx????xxx????xxxx????xxxxxxx?????xx????xxx????xxxxxxxxxxxxxxxxxxxxxxxx????x????x????x????x????x????x????x????x????x????x????xx?????xxxxx????xxxxxxxxxxxxxxxxxxxxxxxx????x????x????x????x????x????xxx????xxx????xxx????xxxx?????xxxxx????xxxxxxxxxxxxxxxxxxxxxxxxx????xx"
);

// v1.0.0: 0x1406C4DE0
SIG_SCAN
(
	sigMainMenu,
	"\x48\x89\x5C\x24\x00\x48\x89\x74\x24\x00\x48\x89\x7C\x24\x00\x55\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\x6C\x24\x00\x48\x81\xEC\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x45\x10\x4C\x8B\xF9\xBF\x00\x00\x00\x00\x89\x79\x68\x48\x81\xC1\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x45\x33\xE4\x4C\x89\x64\x24\x00\x4C\x89\x65\x80\x48\xC7\x45\x00\x00\x00\x00\x00\x44\x88\x64\x24\x00\x45\x33\xC0\x48\x8D\x15\x00\x00\x00\x00\x48\x8D\x4C\x24\x00\xE8\x00\x00\x00\x00\xC7\x45\x00\x00\x00\x00\x00\x44\x88\x65\xA0\x8D\x4F\x47\xE8\x00\x00\x00\x00\x48\xC7\x00\x00\x00\x00\x00\x48\x8D\x58\x08\x4C\x8D\x2D\x00\x00\x00\x00\x4C\x89\x6C\x24\x00\x4C\x8D\x0D\x00\x00\x00\x00\x8D\x57\x1F\x44\x8D\x47\x01\x48\x8B\xCB\xE8\x00\x00\x00\x00\x48\x89\x5D\x98\x44\x8D\x47\x10\x48\x8D\x15\x00\x00\x00\x00\x48\x8D\x4C\x24\x00\xE8\x00\x00\x00\x00\xC7\x45\x00\x00\x00\x00\x00\x8D\x4F\x47\xE8\x00\x00\x00\x00\x48\xC7\x00\x00\x00\x00\x00\x48\x8D\x58\x08\x4C\x89\x6C\x24\x00\x4C\x8D\x0D\x00\x00\x00\x00\x8D\x57\x1F\x44\x8D\x47\x01\x48\x8B\xCB\xE8\x00\x00\x00\x00\x48\x89\x5D\x98\x44\x8D\x47\x0B\x48\x8D\x15\x00\x00\x00\x00\x48\x8B\xCB\xE8\x00\x00\x00\x00\x48\x8D\x4B\x20\x44\x8D\x47\x08\x48\x8D\x15\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x54\x24\x00\x48\x8D\x4C\x24\x00\xE8\x00\x00\x00\x00\x8B\x45\x90\x89\x44\x24\x50\x48\x8B\x45\x98\x48\x89\x44\x24\x00\x0F\xB6\x45\xA0\x88\x44\x24\x60\x48\x8D\x54\x24\x00\x49\x8D\x8F\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x49\x8D\x8F\x00\x00\x00\x00\xE8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x0F\xB6\x48\x14\x41\x88\x8F\x00\x00\x00\x00\x4C\x89\x65\xB0\x4C\x89\x65\xC0\x48\xC7\x45\x00\x00\x00\x00\x00\x44\x88\x65\xB0\x44\x8D\x47\x13\x48\x8D\x15\x00\x00\x00\x00\x48\x8D\x4D\xB0\xE8\x00\x00\x00\x00\x90\x4C\x89\x65\xD0\x4C\x89\x65\xE0\x48\xC7\x45\x00\x00\x00\x00\x00\x44\x88\x65\xD0\x44\x8D\x47\x12\x48\x8D\x15\x00\x00\x00\x00\x48\x8D\x4D\xD0\xE8\x00\x00\x00\x00\x90\x4C\x89\x65\xF0\x4C\x89\x65\x00\x48\xC7\x45\x00\x00\x00\x00\x00\x44\x88\x65\xF0\x44\x8D\x47\x0D\x48\x8D\x15\x00\x00\x00\x00\x48\x8D\x4D\xF0\xE8\x00\x00\x00\x00\x90\x41\x0F\xB6\x87\x00\x00\x00\x00\x48\xC1\xE0\x05\x48\x8D\x55\xB0\x48\x03\xD0\x48\x83\x7A\x00\x00\x72\x03\x48\x8B\x12\xC7\x44\x24\x00\x00\x00\x00\x00\x44\x8B\xCF\x41\xB8\x00\x00\x00\x00\x49\x8D\x8F\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x49\x8D\x8F\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x0F\xB6\x05\x00\x00\x00\x00\x8B\xC8\x3C\x07\x0F\x44\xCF\x88\x0D\x00\x00\x00\x00\x41\x8B\xF4\x49\x8D\x9F\x00\x00\x00\x00\x0F\x1F\x40\x00\x66\x66\x0F\x1F\x84\x00\x00\x00\x00\x00\x45\x33\xC9\x44\x8B\xC6\x48\x8D\x54\x24\x00\xE8\x00\x00\x00\x00\x48\x8B\xF8\x4C\x8D\xB3\x00\x00\x00\x00\x4C\x3B\xF0\x74\x27\x49\x8B\xCE\xE8\x00\x00\x00\x00\x0F\x10\x07\x41\x0F\x11\x06\x0F\x10\x4F\x10\x41\x0F\x11\x4E\x00\x4C\x89\x67\x10\x48\xC7\x47\x00\x00\x00\x00\x00\xC6\x07\x00\x48\x8B\x54\x24\x00\x48\x83\xFA\x10\x72\x32\x48\xFF\xC2\x48\x8B\x4C\x24\x00\x48\x8B\xC1\x48\x81\xFA\x00\x00\x00\x00\x72\x19\x48\x83\xC2\x27\x48\x8B\x49\xF8\x48\x2B\xC1\x48\x83\xC0\xF8\x48\x83\xF8\x1F\x0F\x87\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x41\xB1\x01\x44\x8B\xC6\x48\x8D\x54\x24\x00\xE8\x00\x00\x00\x00\x48\x8B\xF8\x48\x3B\xD8\x74\x25\x48\x8B\xCB\xE8\x00\x00\x00\x00\x0F\x10\x07\x0F\x11\x03\x0F\x10\x4F\x10\x0F\x11\x4B\x10\x4C\x89\x67\x10\x48\xC7\x47\x00\x00\x00\x00\x00\xC6\x07\x00\x48\x8B\x54\x24\x00\x48\x83\xFA\x10\x72\x32\x48\xFF\xC2\x48\x8B\x4C\x24\x00\x48\x8B\xC1\x48\x81\xFA\x00\x00\x00\x00\x72\x19\x48\x83\xC2\x27\x48\x8B\x49\xF8\x48\x2B\xC1\x48\x83\xC0\xF8\x48\x83\xF8\x1F\x0F\x87\x00\x00\x00\x00\xE8\x00\x00\x00\x00\xFF\xC6\x48\x83\xC3\x20\x83\xFE\x06\x0F\x82\x00\x00\x00\x00\x4D\x89\xA7\x00\x00\x00\x00\x4D\x89\xA7\x00\x00\x00\x00\x4D\x89\xA7\x00\x00\x00\x00\x4D\x89\xA7\x00\x00\x00\x00\x49\x8D\x8F\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x80\x3D\x00\x00\x00\x00\x00\x74\x11\x45\x33\xC0\xF3\x0F\x10\x0D\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x90\x4D\x8B\xCD\xBA\x00\x00\x00\x00\x44\x8D\x42\xE3\x48\x8D\x4D\xB0\xE8\x00\x00\x00\x00\x90\x48\x8D\x4C\x24\x00\xE8\x00\x00\x00\x00\xB0\x01\x48\x8B\x4D\x10\x48\x33\xCC\xE8\x00\x00\x00\x00\x4C\x8D\x9C\x24\x00\x00\x00\x00\x49\x8B\x5B\x38\x49\x8B\x73\x40\x49\x8B\x7B\x48\x49\x8B\xE3\x41\x5F\x41\x5E\x41\x5D\x41\x5C\x5D\xC3",
	"xxxx?xxxx?xxxx?xxxxxxxxxxxxx?xxx????xxx????xxxxxxxxxxx????xxxxxx????x????xxxxxxx?xxxxxxx?????xxxx?xxxxxx????xxxx?x????xx?????xxxxxxxx????xxx????xxxxxxx????xxxx?xxx????xxxxxxxxxxx????xxxxxxxxxxx????xxxx?x????xx?????xxxx????xxx????xxxxxxxx?xxx????xxxxxxxxxxx????xxxxxxxxxxx????xxxx????xxxxxxxxxxx????x????xxxx?xxxx?x????xxxxxxxxxxxxxxx?xxxxxxxxxxxx?xxx????x????xxx????x????x????xxxxxxx????xxxxxxxxxxx?????xxxxxxxxxxx????xxxxx????xxxxxxxxxxxx?????xxxxxxxxxxx????xxxxx????xxxxxxxxxxxx?????xxxxxxxxxxx????xxxxx????xxxxx????xxxxxxxxxxxxxx??xxxxxxxx?????xxxxx????xxx????x????xxx????x????xxx????xxxxxxxxx????xxxxxx????xxxxxxxxxx????xxxxxxxxxx?x????xxxxxx????xxxxxxxxx????xxxxxxxxxxxxxxx?xxxxxxx?????xxxxxxx?xxxxxxxxxxxxx?xxxxxx????xxxxxxxxxxxxxxxxxxxxxxx????x????xxxxxxxxxx?x????xxxxxxxxxxxx????xxxxxxxxxxxxxxxxxxxxx?????xxxxxxx?xxxxxxxxxxxxx?xxxxxx????xxxxxxxxxxxxxxxxxxxxxxx????x????xxxxxxxxxxx????xxx????xxx????xxx????xxx????xxx????x????xx?????xxxxxxxxx????x????xxxxx????xxxxxxxxx????xxxxx?x????xxxxxxxxxx????xxxx????xxxxxxxxxxx"
);

extern "C" __declspec(dllexport) void Init()
{
	// DIVA Arcade: sigSoundTheme() + 0xC74
	// DIVA Ver.B : sigSoundTheme() + 0xCA8
	// Future Tone: sigSoundTheme() + 0xCDC

	uint8_t* instrAddr = (uint8_t*)sigSoundTheme() + 0xC74;
	acString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);
	instrAddr += 0x34;
	vbString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);
	instrAddr += 0x34;
	ftString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);

	printf("[Sound Theme Name Changer] acString: 0x%08x\n", acString);
	printf("[Sound Theme Name Changer] vbString: 0x%08x\n", vbString);
	printf("[Sound Theme Name Changer] ftString: 0x%08x\n", ftString);

	// Replace sound theme strings.
	WRITE_MEMORY(acString, const char, "F/Arcade");
	WRITE_MEMORY(vbString, const char, "F2nd/AC Ver.B");
	WRITE_MEMORY(ftString, const char, "DIVA X/FT");

	// Prevent menu sprite from showing.
	#if true
		instrAddr = (uint8_t*)sigMainMenu() + 0x19B;
		acUIString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);
		instrAddr += 0x29;
		vbUIString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);
		instrAddr += 0x29;
		ftUIString = (char*)(instrAddr + readUnalignedU32(instrAddr + 0x3) + 0x7);

		printf("[Sound Theme Name Changer] acUIString: 0x%08x\n", acUIString);
		printf("[Sound Theme Name Changer] vbUIString: 0x%08x\n", vbUIString);
		printf("[Sound Theme Name Changer] ftUIString: 0x%08x\n", ftUIString);

		WRITE_MEMORY(acUIString, uint8_t, 0x00);
		WRITE_MEMORY(vbUIString, uint8_t, 0x00);
		WRITE_MEMORY(ftUIString, uint8_t, 0x00);
	#endif
}
